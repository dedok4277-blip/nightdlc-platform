# ๐ง ะัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะบะธ MySQL ะฒ XAMPP

## ะัะธะฑะบะฐ

```
Error: MySQL shutdown unexpectedly.
This may be due to a blocked port, missing dependencies,
improper privileges, a crash, or a shutdown by another method.
```

## ะะตัะตะฝะธั

### ะะตัะตะฝะธะต 1: ะัะพะฒะตัะบะฐ ะฟะพััะฐ (ัะฐะผะพะต ัะฐััะพะต)

#### ะัะพะฒะตัััะต, ะทะฐะฝัั ะปะธ ะฟะพัั 3306

```cmd
netstat -ano | findstr :3306
```

ะัะปะธ ะฒะธะดะธัะต ััะพ-ัะพ ะฒัะพะดะต:
```
TCP    0.0.0.0:3306    LISTENING    12345
```

ะะฝะฐัะธั ะฟะพัั ะทะฐะฝัั ะดััะณะธะผ ะฟัะพัะตััะพะผ.

#### ะะฐะนะดะธัะต ะฟัะพัะตัั

```cmd
tasklist | findstr "12345"
```

(ะะฐะผะตะฝะธัะต 12345 ะฝะฐ ะฒะฐั PID)

#### ะััะฐะฝะพะฒะธัะต ะฟัะพัะตัั

ะัะปะธ ััะพ ะดััะณะพะน MySQL:
```cmd
net stop MySQL80
# ะธะปะธ
net stop MySQL
```

ะะปะธ ัะตัะตะท ะดะธัะฟะตััะตั ะทะฐะดะฐั:
1. Ctrl+Shift+Esc
2. ะะฐะนะดะธัะต ะฟัะพัะตัั mysqld.exe
3. ะะฐะฒะตััะธัะต ะฟัะพัะตัั

#### ะะฐะฟัััะธัะต MySQL ะฒ XAMPP

ะะฐะถะผะธัะต "Start" ะฒ XAMPP Control Panel.

---

### ะะตัะตะฝะธะต 2: ะะทะผะตะฝะตะฝะธะต ะฟะพััะฐ

ะัะปะธ ะฟะพัั 3306 ะทะฐะฝัั ะธ ะฒั ะฝะต ะผะพะถะตัะต ะตะณะพ ะพัะฒะพะฑะพะดะธัั:

#### 1. ะัะบัะพะนัะต ะบะพะฝัะธะณััะฐัะธั MySQL

ะ XAMPP Control Panel:
- ะะฐะถะผะธัะต "Config" ััะดะพะผ ั MySQL
- ะัะฑะตัะธัะต "my.ini"

#### 2. ะะฐะนะดะธัะต ะธ ะธะทะผะตะฝะธัะต ะฟะพัั

ะะฐะนะดะธัะต ัััะพะบะธ:
```ini
[mysqld]
port=3306
```

ะะทะผะตะฝะธัะต ะฝะฐ:
```ini
[mysqld]
port=3307
```

ะขะฐะบะถะต ะฝะฐะนะดะธัะต:
```ini
[client]
port=3306
```

ะะทะผะตะฝะธัะต ะฝะฐ:
```ini
[client]
port=3307
```

#### 3. ะกะพััะฐะฝะธัะต ะธ ะฟะตัะตะทะฐะฟัััะธัะต

- ะกะพััะฐะฝะธัะต ัะฐะนะป
- ะะตัะตะทะฐะฟัััะธัะต MySQL ะฒ XAMPP

#### 4. ะะฑะฝะพะฒะธัะต .env

ะ ัะฐะนะปะต `Site For NightDLC/.env`:

```env
DB_PORT=3307
```

---

### ะะตัะตะฝะธะต 3: ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั

ะัะปะธ ะฑะฐะทะฐ ะดะฐะฝะฝัั ะฟะพะฒัะตะถะดะตะฝะฐ:

#### 1. ะััะฐะฝะพะฒะธัะต MySQL

ะ XAMPP ะฝะฐะถะผะธัะต "Stop".

#### 2. ะะตัะตะธะผะตะฝัะนัะต ะฟะฐะฟะบั data

```cmd
cd C:\xampp\mysql
ren data data_old
```

#### 3. ะกะพะทะดะฐะนัะต ะฝะพะฒัั ะฟะฐะฟะบั data

```cmd
mkdir data
```

#### 4. ะกะบะพะฟะธััะนัะต ัะธััะตะผะฝัะต ะฑะฐะทั

```cmd
xcopy data_old\mysql data\mysql /E /I
xcopy data_old\performance_schema data\performance_schema /E /I
xcopy data_old\phpmyadmin data\phpmyadmin /E /I
```

#### 5. ะกะบะพะฟะธััะนัะต ะฒะฐัั ะฑะฐะทั (ะตัะปะธ ะฑัะปะฐ)

```cmd
xcopy data_old\cz505339_nelondlc data\cz505339_nelondlc /E /I
```

#### 6. ะะฐะฟัััะธัะต MySQL

ะะฐะถะผะธัะต "Start" ะฒ XAMPP.

#### 7. ะะตัะตัะพะทะดะฐะนัะต ะฑะฐะทั (ะตัะปะธ ะฝัะถะฝะพ)

```bash
cd "Site For NightDLC"
node create-database.js
```

---

### ะะตัะตะฝะธะต 4: ะะตัะตัััะฐะฝะพะฒะบะฐ MySQL ะฒ XAMPP

ะัะปะธ ะฝะธัะตะณะพ ะฝะต ะฟะพะผะพะณะปะพ:

#### 1. ะกะดะตะปะฐะนัะต ะฑัะบะฐะฟ ะฑะฐะทั (ะตัะปะธ ะตััั ะดะฐะฝะฝัะต)

ะงะตัะตะท phpMyAdmin:
- ะัะบัะพะนัะต http://localhost/phpmyadmin
- ะัะฑะตัะธัะต ะฑะฐะทั `cz505339_nelondlc`
- ะญะบัะฟะพัั -> SQL -> ะัะฟะพะปะฝะธัั

#### 2. ะฃะดะฐะปะธัะต MySQL

```cmd
cd C:\xampp\mysql
rmdir /s /q data
```

#### 3. ะะตัะตัััะฐะฝะพะฒะธัะต XAMPP

ะะปะธ ัะบะฐัะฐะนัะต ัะพะปัะบะพ MySQL ะผะพะดัะปั.

#### 4. ะะพัััะฐะฝะพะฒะธัะต ะฑะฐะทั

ะะผะฟะพััะธััะนัะต SQL ัะฐะนะป ัะตัะตะท phpMyAdmin.

---

### ะะตัะตะฝะธะต 5: ะัะฟะพะปัะทะพะฒะฐะฝะธะต SQLite (ะฐะปััะตัะฝะฐัะธะฒะฐ)

ะัะปะธ MySQL ะฝะต ะทะฐะฟััะบะฐะตััั, ะธัะฟะพะปัะทัะนัะต SQLite:

#### 1. ะะฑะฝะพะฒะธัะต .env

```env
# ะะฐะบะพะผะผะตะฝัะธััะนัะต MySQL ะฝะฐัััะพะนะบะธ
# DB_HOST=localhost
# DB_USER=root
# DB_PASSWORD=
# DB_NAME=cz505339_nelondlc
# DB_PORT=3306

# ะัะฟะพะปัะทัะนัะต SQLite
USE_SQLITE=true
```

#### 2. ะะฑะฝะพะฒะธัะต server/index.js

ะะทะผะตะฝะธัะต ะธะผะฟะพัั:

```javascript
// ะัะปะพ:
import pool, { nextUid } from './db-mysql.js'

// ะกัะฐะปะพ:
import pool, { nextUid } from './db-sqlite-backup.js'
```

#### 3. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั

```bash
npm run api
```

SQLite ะฝะต ััะตะฑัะตั ะพัะดะตะปัะฝะพะณะพ ัะตัะฒะตัะฐ!

---

## ะัะพะฒะตัะบะฐ ัะตัะตะฝะธั

### 1. ะัะพะฒะตัััะต ััะฐััั MySQL

ะ XAMPP Control Panel ะดะพะปะถะฝะพ ะฑััั ะทะตะปะตะฝัะผ.

### 2. ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต

```bash
cd "Site For NightDLC"
node test-mysql-connection.js
```

ะะพะปะถะฝะพ ะฟะพะบะฐะทะฐัั:
```
โ MySQL connection successful!
```

### 3. ะะฐะฟัััะธัะต ัะตัะฒะตั

```bash
npm run api
```

ะะพะปะถะฝะพ ะฟะพะบะฐะทะฐัั:
```
โ NelonDLC API listening on http://localhost:5173
๐ Database: MySQL (cz505339_nelondlc)
```

---

## ะะพะณะธ ะดะปั ะดะธะฐะณะฝะพััะธะบะธ

### ะะพะณะธ MySQL

```cmd
cd C:\xampp\mysql\data
notepad mysql_error.log
```

### ะะพะณะธ XAMPP

ะ XAMPP Control Panel:
- ะะฐะถะผะธัะต "Logs" ััะดะพะผ ั MySQL
- ะัะฑะตัะธัะต "Error log"

### ะัะพะฒะตัะบะฐ ะฟะพััะพะฒ

```cmd
netstat -ano | findstr :3306
```

---

## ะงะฐัััะต ะฟัะธัะธะฝั

### 1. ะััะณะพะน MySQL ัััะฐะฝะพะฒะปะตะฝ

ะัะพะฒะตัััะต:
```cmd
sc query MySQL80
sc query MySQL
```

ะััะฐะฝะพะฒะธัะต:
```cmd
net stop MySQL80
```

### 2. ะะฝัะธะฒะธััั ะฑะปะพะบะธััะตั

ะะพะฑะฐะฒััะต ะฒ ะธัะบะปััะตะฝะธั:
- `C:\xampp\mysql\bin\mysqld.exe`
- ะะพัั 3306

### 3. ะะตะดะพััะฐัะพัะฝะพ ะฟัะฐะฒ

ะะฐะฟัััะธัะต XAMPP ะพั ะฐะดะผะธะฝะธัััะฐัะพัะฐ:
- ะะะ ะฝะฐ XAMPP Control Panel
- "ะะฐะฟััะบ ะพั ะธะผะตะฝะธ ะฐะดะผะธะฝะธัััะฐัะพัะฐ"

### 4. ะะพะฒัะตะถะดะตะฝะฝัะต ัะฐะนะปั

ะกะผ. ะะตัะตะฝะธะต 3 ะฒััะต.

---

## ะะตะบะพะผะตะฝะดะฐัะธะธ

### โ ะะปั ัะฐะทัะฐะฑะพัะบะธ

ะัะฟะพะปัะทัะนัะต **SQLite** - ะฟัะพัะต ะธ ะฝะต ััะตะฑัะตั XAMPP:

```javascript
// server/index.js
import pool, { nextUid } from './db-sqlite-backup.js'
```

### โ ะะปั production

ะัะฟะพะปัะทัะนัะต **MySQL** ะฝะฐ ัะพััะธะฝะณะต (Timeweb):

```env
DB_HOST=cz505339.twc1.net
DB_USER=cz505339_user
DB_PASSWORD=your_password
DB_NAME=cz505339_nelondlc
DB_PORT=3306
```

---

## ะััััะฐั ะดะธะฐะณะฝะพััะธะบะฐ

```cmd
# 1. ะัะพะฒะตัััะต ะฟะพัั
netstat -ano | findstr :3306

# 2. ะัะพะฒะตัััะต ะฟัะพัะตััั
tasklist | findstr mysqld

# 3. ะัะพะฒะตัััะต ัะปัะถะฑั
sc query MySQL80

# 4. ะัะพะฒะตัััะต ะปะพะณะธ
type C:\xampp\mysql\data\mysql_error.log
```

---

## ะัะปะธ ะฝะธัะตะณะพ ะฝะต ะฟะพะผะพะณะปะพ

### ะะฐัะธะฐะฝั 1: ะัะฟะพะปัะทัะนัะต SQLite

ะกะฐะผัะน ะฟัะพััะพะน ัะฟะพัะพะฑ - ะฟะตัะตะบะปััะธัะตัั ะฝะฐ SQLite ะดะปั ัะฐะทัะฐะฑะพัะบะธ.

### ะะฐัะธะฐะฝั 2: ะัะฟะพะปัะทัะนัะต Docker

```bash
docker run -d -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=root \
  -e MYSQL_DATABASE=cz505339_nelondlc \
  mysql:8.0
```

### ะะฐัะธะฐะฝั 3: ะฃััะฐะฝะพะฒะธัะต MySQL ะพัะดะตะปัะฝะพ

ะกะบะฐัะฐะนัะต MySQL Community Server ั ะพัะธัะธะฐะปัะฝะพะณะพ ัะฐะนัะฐ.

---

**ะกัะฐััั**: ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั  
**ะะฐัะฐ**: ะคะตะฒัะฐะปั 2026

## ะััััะฐั ะฟะพะผะพัั

```cmd
# ะััะฐะฝะพะฒะธัั ะฒัะต MySQL
net stop MySQL80
net stop MySQL

# ะัะพะฒะตัะธัั ะฟะพัั
netstat -ano | findstr :3306

# ะะฐะฟัััะธัั XAMPP ะพั ะฐะดะผะธะฝะฐ
# ะะะ -> ะะฐะฟััะบ ะพั ะธะผะตะฝะธ ะฐะดะผะธะฝะธัััะฐัะพัะฐ
```

ะฃะดะฐัะธ! ๐

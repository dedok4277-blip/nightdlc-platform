# üõ°Ô∏è Anti-DDoS Protection System

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç DDoS –∞—Ç–∞–∫ —Å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∑–∞—â–∏—Ç–æ–π:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö IP
- ‚úÖ Rate limiting –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ Whitelist –¥–ª—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã

### 1. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP (Block IP)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç IP –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∞—Ç–∞–∫–∏:
- **–ü–æ—Ä–æ–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: 500 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: 15 –º–∏–Ω—É—Ç
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –î–∞

### 2. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (Suspicious Activity)

–ü–æ–º–µ—á–∞–µ—Ç IP –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π:
- **–ü–æ—Ä–æ–≥**: 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–î–µ–π—Å—Ç–≤–∏–µ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 3. Rate Limiting

#### –û–±—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã (General)
- **–õ–∏–º–∏—Ç**: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**: –ö–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º

#### API –∑–∞–ø—Ä–æ—Å—ã
- **–õ–∏–º–∏—Ç**: 50 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**: –ö `/api/*` –º–∞—Ä—à—Ä—É—Ç–∞–º

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Auth)
- **–õ–∏–º–∏—Ç**: 5 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 15 –º–∏–Ω—É—Ç
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**: –ö `/api/auth/login` –∏ `/api/auth/register`

### 4. Speed Limiting

–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:
- **–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ**: 50 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: +100–º—Å –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 5 —Å–µ–∫—É–Ω–¥

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```javascript
const DDOS_CONFIG = {
  // –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –æ–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏
  maxRequests: 100,
  windowMs: 60 * 1000, // 1 –º–∏–Ω—É—Ç–∞
  
  // –ü–æ—Ä–æ–≥ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  suspiciousThreshold: 200, // –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –º–∏–Ω—É—Ç—É
  blockThreshold: 500, // –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –º–∏–Ω—É—Ç—É
  
  // –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  blockDuration: 15 * 60 * 1000, // 15 –º–∏–Ω—É—Ç
  
  // Whitelist IP (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è)
  whitelist: ['127.0.0.1', '::1', 'localhost'],
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `server/anti-ddos.js`:

```javascript
// –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
blockThreshold: 1000, // –≤–º–µ—Å—Ç–æ 500

// –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
blockDuration: 30 * 60 * 1000, // 30 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 15

// –î–æ–±–∞–≤–∏—Ç—å IP –≤ whitelist
whitelist: ['127.0.0.1', '::1', 'localhost', '192.168.1.100'],
```

## API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

```javascript
GET /api/admin/ddos/stats
Authorization: Bearer <admin_token>

// –û—Ç–≤–µ—Ç:
{
  "blockedIPs": ["192.168.1.100", "10.0.0.50"],
  "suspiciousIPs": [
    {
      "ip": "192.168.1.200",
      "markedAt": 1738681919000,
      "requestCount": 250,
      "reason": "High request rate"
    }
  ],
  "activeConnections": 15,
  "totalBlocked": 2,
  "totalSuspicious": 1
}
```

### –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å IP –≤—Ä—É—á–Ω—É—é

```javascript
POST /api/admin/ddos/block
Authorization: Bearer <admin_token>

{
  "ip": "192.168.1.100",
  "duration": 900000,  // 15 –º–∏–Ω—É—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "reason": "Manual block"  // (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}

// –û—Ç–≤–µ—Ç:
{
  "success": true,
  "message": "IP 192.168.1.100 blocked for 900s"
}
```

### –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å IP

```javascript
POST /api/admin/ddos/unblock
Authorization: Bearer <admin_token>

{
  "ip": "192.168.1.100"
}

// –û—Ç–≤–µ—Ç:
{
  "success": true,
  "message": "IP 192.168.1.100 unblocked"
}
```

### –î–æ–±–∞–≤–∏—Ç—å IP –≤ whitelist

```javascript
POST /api/admin/ddos/whitelist
Authorization: Bearer <admin_token>

{
  "ip": "192.168.1.100"
}

// –û—Ç–≤–µ—Ç:
{
  "success": true,
  "message": "IP 192.168.1.100 added to whitelist"
}
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP

```
üö® BLOCKED IP 192.168.1.100 - 520 requests in 1 minute
```

### –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

```
‚ö†Ô∏è  Suspicious activity from 192.168.1.200 - 250 requests in 1 minute
‚ö†Ô∏è  Suspicious request from 192.168.1.200: {
  path: '/api/posts',
  method: 'GET',
  userAgent: 'Mozilla/5.0...',
  requestCount: 250,
  reason: 'High request rate'
}
```

### –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

```
‚úÖ Unblocked IP 192.168.1.100
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```
üßπ Cleaned up old request data. Active IPs: 15
```

## –û—Ç–≤–µ—Ç—ã –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ

### –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π IP

```json
HTTP 429 Too Many Requests

{
  "error": "too_many_requests",
  "message": "Your IP has been temporarily blocked due to suspicious activity",
  "blockedFor": 850,
  "retryAfter": 850
}
```

### –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

```json
HTTP 429 Too Many Requests

{
  "error": "too_many_requests",
  "message": "Too many requests from this IP, please try again later"
}
```

### –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç API

```json
HTTP 429 Too Many Requests

{
  "error": "too_many_requests",
  "message": "Too many API requests, please slow down"
}
```

### –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```json
HTTP 429 Too Many Requests

{
  "error": "too_many_requests",
  "message": "Too many login attempts, please try again later"
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞—â–∏—Ç–∞

### 1. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –ø–æ IP –∞–¥—Ä–µ—Å—É:
```javascript
{
  "192.168.1.100": {
    count: 150,
    firstRequest: 1738681919000,
    lastRequest: 1738681979000,
    requests: [1738681919000, 1738681920000, ...]
  }
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
1. –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ IP?
2. –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏ –ø–æ—Ä–æ–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (500 req/min)?
3. –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏ –ø–æ—Ä–æ–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (200 req/min)?

### 3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞

–ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ø–æ—Ä–æ–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
1. IP –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `blockedIPs`
2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `suspiciousIPs`
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
4. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç —ç—Ç–æ–≥–æ IP –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å –∫–æ–¥–æ–º 429

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

–ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
1. IP —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `blockedIPs`
2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `suspiciousIPs`
3. –°—á–µ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

### 5. –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:
- –£–¥–∞–ª—è—é—Ç—Å—è —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è IP, –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç
- –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø–∞–º—è—Ç—å

## Whitelist

IP –∏–∑ whitelist:
- ‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ù–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è rate limiting
- ‚úÖ –ù–µ –∑–∞–º–µ–¥–ª—è—é—Ç—Å—è
- ‚úÖ –ù–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ whitelist:
- `127.0.0.1` (localhost IPv4)
- `::1` (localhost IPv6)
- `localhost`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫–∏

–ê—Ç–∞–∫—É—é—â–∏–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É:

1. –ü–æ—Å–ª–µ 200 –∑–∞–ø—Ä–æ—Å–æ–≤ - –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π
2. –ü–æ—Å–ª–µ 500 –∑–∞–ø—Ä–æ—Å–æ–≤ - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 15 –º–∏–Ω—É—Ç
3. –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å –∫–æ–¥–æ–º 429
4. –ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

### –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞

–ê—Ç–∞–∫—É—é—â–∏–π –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–∞—Ä–æ–ª—å:

1. –ü–æ—Å–ª–µ 5 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 15 –º–∏–Ω—É—Ç - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
2. –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è
3. –ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç - –º–æ–∂–µ—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞

### –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞

–ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —Å–ø–∞—Ä—Å–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã:

1. –ü–æ—Å–ª–µ 50 –∑–∞–ø—Ä–æ—Å–æ–≤ - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ (+100–º—Å –∑–∞ –∑–∞–ø—Ä–æ—Å)
2. –ü–æ—Å–ª–µ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ - rate limiting (429 Too Many Requests)
3. –ü–æ—Å–ª–µ 200 –∑–∞–ø—Ä–æ—Å–æ–≤ - –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π
4. –ü–æ—Å–ª–µ 500 –∑–∞–ø—Ä–æ—Å–æ–≤ - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```bash
curl -H "Authorization: Bearer <admin_token>" \
  http://localhost:5173/api/admin/ddos/stats
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞:
```bash
npm run api
# –∏–ª–∏
node server/index.js
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç rate limiting

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å 150 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 10 —Å–µ–∫—É–Ω–¥
for i in {1..150}; do
  curl http://localhost:5173/api/ping &
done
wait
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ü–µ—Ä–≤—ã–µ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ - —É—Å–ø–µ—à–Ω—ã
- –°–ª–µ–¥—É—é—â–∏–µ 50 –∑–∞–ø—Ä–æ—Å–æ–≤ - 429 Too Many Requests

### –¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å 600 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 10 —Å–µ–∫—É–Ω–¥
for i in {1..600}; do
  curl http://localhost:5173/api/ping &
done
wait
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ü–µ—Ä–≤—ã–µ 500 –∑–∞–ø—Ä–æ—Å–æ–≤ - —É—Å–ø–µ—à–Ω—ã (—Å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ 50)
- –ü–æ—Å–ª–µ 500 –∑–∞–ø—Ä–æ—Å–æ–≤ - IP –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã - 429 —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ**: ~1-2–º—Å –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **–ü–∞–º—è—Ç—å**: ~1KB –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–π IP
- **CPU**: –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–£–≤–µ–ª–∏—á–∏—Ç—å windowMs** - —É–º–µ–Ω—å—à–∏—Ç —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫
2. **–£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏** - —É–º–µ–Ω—å—à–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
3. **–£–º–µ–Ω—å—à–∏—Ç—å blockDuration** - –±—ã—Å—Ç—Ä–µ–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç

‚úÖ DDoS –∞—Ç–∞–∫–∏ (Distributed Denial of Service)
‚úÖ DoS –∞—Ç–∞–∫–∏ (Denial of Service)
‚úÖ –ë—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫–∏ –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –±–æ—Ç–∞–º–∏
‚úÖ API abuse
‚úÖ Spam –∑–∞–ø—Ä–æ—Å—ã

### –ß—Ç–æ –ù–ï –∑–∞—â–∏—â–∞–µ—Ç

‚ùå SQL –∏–Ω—ä–µ–∫—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ prepared statements)
‚ùå XSS –∞—Ç–∞–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ sanitization)
‚ùå CSRF –∞—Ç–∞–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSRF tokens)
‚ùå –ê—Ç–∞–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ whitelist** - –¥–æ–±–∞–≤—å—Ç–µ IP –≤–∞—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –º–∞—Å—Å–æ–≤—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** - Cloudflare, AWS CloudFront
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π IP –≤ whitelist** - —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è
2. **–£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã** - –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–û—Ç–∫–ª—é—á–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É** - –µ—Å–ª–∏ –º–µ—à–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## Troubleshooting

### –Ø –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–π IP:
   ```bash
   curl http://localhost:5173/api/ping
   ```

2. –†–∞–∑–±–ª–æ–∫–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ API:
   ```bash
   curl -X POST http://localhost:5173/api/admin/ddos/unblock \
     -H "Authorization: Bearer <admin_token>" \
     -H "Content-Type: application/json" \
     -d '{"ip":"YOUR_IP"}'
   ```

3. –î–æ–±–∞–≤—å—Ç–µ –≤ whitelist:
   ```bash
   curl -X POST http://localhost:5173/api/admin/ddos/whitelist \
     -H "Authorization: Bearer <admin_token>" \
     -H "Content-Type: application/json" \
     -d '{"ip":"YOUR_IP"}'
   ```

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

1. –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥–∏ –≤ `server/anti-ddos.js`
2. –£–≤–µ–ª–∏—á—å—Ç–µ `blockThreshold` —Å 500 –¥–æ 1000
3. –£–≤–µ–ª–∏—á—å—Ç–µ `suspiciousThreshold` —Å 200 –¥–æ 500

### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞—â–∏—Ç—ã

1. –£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥–∏
2. –£–≤–µ–ª–∏—á—å—Ç–µ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
3. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ Anti-DDoS –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –∑–∞—â–∏—Ç—É –æ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ç–∏–ø–æ–≤ –∞—Ç–∞–∫:

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞—Ç–∞–∫—É—é—â–∏—Ö
‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞
‚úÖ –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚úÖ –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!**

# ✅ Чеклист деплоя на Timeweb

## Перед деплоем

- [ ] Проект работает локально (`npm run dev` + `npm run api`)
- [ ] Все изменения сохранены
- [ ] База данных `nightdlc.db` существует
- [ ] Есть хотя бы один админ-пользователь

## Подготовка файлов

- [ ] Выполнена команда `npm run build`
- [ ] Папка `dist` создана и содержит файлы
- [ ] Проверен файл `ecosystem.config.js`
- [ ] Проверен файл `server/index.js`

## Загрузка на сервер

- [ ] Установлен FTP/SFTP клиент (FileZilla, WinSCP)
- [ ] Есть данные для подключения:
  - Хост: `cz505339.tw1.ru`
  - Пользователь: `cz505339`
  - Пароль: (из панели Timeweb)

- [ ] Загружены все файлы КРОМЕ:
  - `node_modules/`
  - `.git/`
  - `*.log`
  - `deploy.tar.gz`

## Настройка на сервере

- [ ] Подключение по SSH работает
- [ ] Перешли в директорию сайта: `cd ~/cz505339.tw1.ru/public_html`
- [ ] Установлены зависимости: `npm install --production`
- [ ] Собран фронтенд (если не загружали): `npm run build`

## Запуск приложения

- [ ] PM2 установлен: `npm install -g pm2`
- [ ] Приложение запущено: `pm2 start ecosystem.config.js`
- [ ] Конфигурация сохранена: `pm2 save`
- [ ] Автозапуск настроен: `pm2 startup`
- [ ] Статус проверен: `pm2 status`

## Настройка в панели Timeweb

- [ ] Открыта панель управления Timeweb
- [ ] Перешли в раздел "Сайты"
- [ ] Настроено проксирование на порт `5173`
- [ ] Изменения сохранены

## Проверка работы

- [ ] Сайт открывается: `http://cz505339.tw1.ru`
- [ ] Главная страница загружается
- [ ] Регистрация работает
- [ ] Вход работает
- [ ] Админ-панель доступна
- [ ] Загрузка файлов работает
- [ ] API отвечает: `http://cz505339.tw1.ru/api/health`

## Дополнительно (опционально)

- [ ] Привязан собственный домен
- [ ] Настроен SSL сертификат (Let's Encrypt)
- [ ] Настроен мониторинг: `pm2 monit`
- [ ] Проверены логи: `pm2 logs nelondlc`

## Тестирование функционала

- [ ] Регистрация нового пользователя
- [ ] Вход в систему
- [ ] Загрузка аватара
- [ ] Создание поста на форуме
- [ ] Активация лицензионного ключа
- [ ] Админ-панель: управление пользователями
- [ ] Админ-панель: генерация ключей
- [ ] Админ-панель: управление постами

## В случае проблем

- [ ] Проверены логи: `pm2 logs nelondlc --lines 100`
- [ ] Проверен статус: `pm2 status`
- [ ] Проверены права на файлы: `ls -la`
- [ ] Проверена база данных: `ls -la nightdlc.db`
- [ ] Перезапущено приложение: `pm2 restart nelondlc`

---

## Полезные команды для копирования

```bash
# Подключение по SSH
ssh cz505339@cz505339.tw1.ru

# Переход в директорию
cd ~/cz505339.tw1.ru/public_html

# Установка зависимостей
npm install --production

# Сборка фронтенда
npm run build

# Запуск через PM2
pm2 start ecosystem.config.js
pm2 save
pm2 startup

# Проверка
pm2 status
pm2 logs nelondlc

# Перезапуск
pm2 restart nelondlc
```

---

## Контакты для поддержки

- Документация Timeweb: https://timeweb.com/ru/help/
- Поддержка Timeweb: support@timeweb.ru
- Панель управления: https://timeweb.com/ru/my/
